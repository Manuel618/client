{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mmera\\\\OneDrive\\\\Escritorio\\\\Teminar esto de RAUL\\\\Ejercicio_10\\\\client\\\\src\\\\components\\\\Login.jsx\";\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport '../styles/Login.css';\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [captchaValue, setCaptchaValue] = useState(null);\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n  const handleCaptchaChange = value => {\n    console.log(\"Captcha value:\", value);\n    setCaptchaValue(value);\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    if (!captchaValue) {\n      setMessage(\"Por favor, completa el captcha.\");\n      return;\n    }\n    try {\n      const res = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password,\n          captcha: captchaValue\n        })\n      });\n      const data = await res.json();\n      if (res.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        navigate('/university');\n      } else {\n        setMessage(`Error: ${data.message}`);\n      }\n    } catch (error) {\n      console.error(error);\n      setMessage('Ocurrió un error al iniciar sesión.');\n    }\n  };\n  const goToRegister = () => {\n    navigate('/register');\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Iniciar Sesi\\xF3n\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"Correo:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"Contrase\\xF1a:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recaptcha-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ReCAPTCHA, {\n    sitekey: \"6LeW0fAqAAAAAKhW6gWux26t_euhE_Qg3VP4NVBv\" // Reemplaza con tu clave de sitio de Google reCAPTCHA\n    ,\n    onChange: handleCaptchaChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Entrar\")), message && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error-msg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, message), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"\\xBFNo tienes una cuenta?\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: goToRegister,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Registrarse\"))));\n}\nexport default Login;","map":{"version":3,"names":["React","useState","useNavigate","ReCAPTCHA","Login","email","setEmail","password","setPassword","captchaValue","setCaptchaValue","message","setMessage","navigate","handleCaptchaChange","value","console","log","handleLogin","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","captcha","data","json","ok","localStorage","setItem","token","user","error","goToRegister","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","target","required","sitekey","onClick"],"sources":["C:/Users/mmera/OneDrive/Escritorio/Teminar esto de RAUL/Ejercicio_10/client/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport '../styles/Login.css';\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [captchaValue, setCaptchaValue] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleCaptchaChange = (value) => {\r\n    console.log(\"Captcha value:\", value);\r\n    setCaptchaValue(value);\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!captchaValue) {\r\n      setMessage(\"Por favor, completa el captcha.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/auth/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password, captcha: captchaValue }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        localStorage.setItem('token', data.token);\r\n        localStorage.setItem('user', JSON.stringify(data.user));\r\n        navigate('/university');\r\n      } else {\r\n        setMessage(`Error: ${data.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessage('Ocurrió un error al iniciar sesión.');\r\n    }\r\n  };\r\n\r\n  const goToRegister = () => {\r\n    navigate('/register');\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"auth-container\">\r\n        <h2>Iniciar Sesión</h2>\r\n        <form onSubmit={handleLogin}>\r\n          <label>\r\n            Correo:\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </label>\r\n          <label>\r\n            Contraseña:\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </label>\r\n\r\n          {/* Contenedor del Captcha centrado */}\r\n          <div className=\"recaptcha-container\">\r\n            <ReCAPTCHA\r\n              sitekey=\"6LeW0fAqAAAAAKhW6gWux26t_euhE_Qg3VP4NVBv\" // Reemplaza con tu clave de sitio de Google reCAPTCHA\r\n              onChange={handleCaptchaChange}\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\">Entrar</button>\r\n        </form>\r\n\r\n        {message && <p className=\"error-msg\">{message}</p>}\r\n\r\n        <div className=\"auth-link\">\r\n          <p>¿No tienes una cuenta?</p>\r\n          <button type=\"button\" onClick={goToRegister}>\r\n            Registrarse\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}